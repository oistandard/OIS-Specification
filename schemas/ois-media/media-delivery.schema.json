{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://ois.foundation/schemas/ois-media/media-delivery.schema.json",
  "title": "OIS Media Delivery",
  "type": "array",
  "items": {
    "type": "object",
    "additionalProperties": false,
    "required": [
      "mediaId",
      "campaignId",
      "asset",
      "targets",
      "playback",
      "caching",
      "validUntil"
    ],
    "properties": {
      "mediaId": { "type": "string" },
      "campaignId": { "type": "string" },
      "asset": {
        "type": "object",
        "additionalProperties": false,
        "required": ["uri", "type", "checksum"],
        "properties": {
          "uri": { "type": "string", "format": "uri" },
          "type": {
            "type": "string",
            "enum": ["video/mp4", "video/webm", "image/png", "image/jpeg"]
          },
          "checksum": { "type": "string" }
        }
      },
      "targets": {
        "type": "array",
        "minItems": 1,
        "items": { "type": "string" }
      },
      "playback": {
        "type": "object",
        "additionalProperties": false,
        "required": ["durationSeconds", "loop", "triggers"],
        "properties": {
          "durationSeconds": { "type": "integer", "minimum": 1 },
          "loop": { "type": "boolean" },
          "triggers": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "enum": ["schedule", "motion", "manual", "event"]
            }
          }
        }
      },
      "caching": {
        "type": "object",
        "additionalProperties": false,
        "required": ["mode", "refreshOnChange"],
        "properties": {
          "mode": { "type": "string", "enum": ["edge", "origin", "device"] },
          "refreshOnChange": { "type": "boolean" }
        }
      },
      "validUntil": { "type": "string", "format": "date-time" }
    }
  }
}
